{% extends 'base.html' %} {% load static %} {% block page_head %}
<link
  href="{% static 'bigday/css/invitation.css' %}"
  rel="stylesheet"
  xmlns="http://www.w3.org/1999/html"
/>
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
{% endblock %} {% block page_content %}
<div class="container" id="invitation-body">
  <section class="video-container">
    <div class="responsive-video">
      <iframe
        src="https://www.youtube.com/embed/jHWKtQHXVJg"
        frameborder="0"
        allowfullscreen
      ></iframe>
    </div>
  </section>
  <section class="col-md-6 text-center">
    {% if party.is_invited_to_church %}
    <div id="invitation-details">
      <h2>Aleksin ja Marikan häät</h2>
      <p class="lead">
        Sanomme toisillemme tahdon <br />
        Lauantaina 7.8.2021 klo 15.00<br />
        Svartbäckin saaristokirkossa <br />
        (Svartbäckintie 29, Sipoo)</br></br>
        Vihkitilaisuuden jälkeen jatkamme hääjuhlaa Byarsborgin juhlatilalla</br>
        (Storuddintie 20, Sipoo)
      </p>
    </div>
    {% else %}
    <div id="invitation-details">
      <h2>Aleksin ja Marikan häät</h2>
      <p class="lead">
        Meillä on ilo kutsua teidät osaksi suurta päiväämme<br />
        Lauantaina 7.8.2021 klo 16:00 Byarsborgin juhlatilalle.
      </p>
    </div>
    {%endif%}
  </section>
  <section class="col-md-6">
    <form
      data-toggle="validator"
      id="invitation-details"
      class="form-horizontal"
      method="post"
    >
      <h2 id="rsvp-header" class="text-center">RSVP</h2>
      <div class="clearfix"></div>
      {% csrf_token %} {% for guest in party.ordered_guests.all %}
      <div class="form-group col-sm-12">
        {% with 'attending-'|add:guest.unique_id as attending_label %}
        <label for="{{ attending_label }}" class="col-sm-4 control-label"
          >{{ guest.name }}</label
        >
        <div class="col-sm-8">
        <label class="radio-inline">
          <input
            class="attending-radio"
            type="radio"
            name="{{ attending_label }}"
            value="yes"
            {% if guest.is_attending %}checked="checked"
            {% endif %}
            required
          />
          osallistuu
        </label>
        <label class="radio-inline">
          <input class="attending-radio" type="radio" name="{{ attending_label }}" value="no" {% if guest.is_attending == False %}checked="checked"{% endif %} required> ei osallistu
        </label>
      </div>
        {% endwith %}
      </div>
      {% with 'diet-'|add:guest.unique_id as diet_label %}
      <div class="form-group col-sm-12">
        <label for="{{ diet_label  }}" class="col-sm-4 control-label "
          >erikoisruokavalio
          </label
        >
        <div class="col-sm-8"><input
          type="text"
          name="{{ diet_label }}"
          class="form-control"
          placeholder="Jos erikoisruokavalio täytä tähän?"
          value="{{ guest.diet }}"
        /></div>
      </div>
      {% endwith %} {% endfor %}
      <div class="form-group col-sm-12"><img class="imga" src="http://vignette2.wikia.nocookie.net/animal-jam-clans-1/images/0/00/Divider_%28SpiralClan%29.png/revision/latest?cb=20160814190602"> </div>
      <div class="form-group col-sm-12">
        <input
          type="text"
          name="comments"
          class="form-control form-control-lg"
          placeholder="Kysymyksiä/kommentteja/onnen toivotuksia?"
        />
      </div>
      <div class="form-group margin-lg">
        <div class="text-center">
          <input
            type="submit"
            class="btn btn-primary"
            value="Submit Response"
          />
        </div>
      </div>
    </form>
  </section>
</div>
{% endblock %} {% block page_js %}
<script src="{% static 'validator.js' %}"></script>
<script>
  $(function () {
    // enable/disable diet choices based on attendance
    $("input.attending-radio").change(function (e) {
      var target = $(e.target);
      if (target.closest(".form-group").data("is-child") === "True") {
        // don't attempt to update diets for children, who don't have them.
        return;
      }
      var value = target.attr("value");
      var dietButtonContainer = target
        .closest(".form-group")
        .next(".form-group");
      var dietButtons = dietButtonContainer.find("[type=radio]");
      if (value === "yes") {
        dietButtonContainer.removeClass("text-muted");
        dietButtons.each(function (index, button) {
          button.disabled = false;
          button.required = true;
        });
      } else if (value === "no") {
        dietButtonContainer.addClass("text-muted");
        dietButtons.each(function (index, button) {
          button.checked = false;
          button.disabled = true;
          button.required = false;
        });
      }
      // reload validation
      $(document.forms[0]).validator("destroy");
      $(document.forms[0]).validator();
    });
  });
</script>
{% endblock %}
